    - name: Configure APT sources and install software
      run: |
        # 1. Temporarily replace the sources.list with the official Ubuntu servers
        # This resolves the `mirror+file` issue by ignoring the custom mirror setup.
        sudo sh -c 'echo "deb http://archive.ubuntu.com/ubuntu/ $(lsb_release -cs) main universe" > /etc/apt/sources.list'

        # 2. Update the package list to use the new sources
        sudo apt-get update

        # 3. Clean the APT cache to remove any corrupted or outdated packages
        sudo apt-get clean

        # 4. Force installation of missing dependencies
        sudo apt-get install --fix-missing -y

        # 5. Install XFCE and other required components
        sudo DEBIAN_FRONTEND=noninteractive apt-get install -y xfce4 desktop-base dbus-x11 xscreensaver

        # 6. Install Chrome Remote Desktop
        wget https://dl.google.com/linux/direct/chrome-remote-desktop_current_amd64.deb
        sudo apt-get install --assume-yes ./chrome-remote-desktop_current_amd64.deb

        # 7. Configure Chrome Remote Desktop to use the XFCE session
        sudo bash -c 'echo "exec /etc/X11/Xsession /usr/bin/xfce4-session" > /etc/chrome-remote-desktop-session'
